const connection = require("../../config/mysql");
module.exports = {
  getDashboard: data => new Promise((resolve, reject) => {
    connection.query(data === "daily" ? "SELECT MAX(createdAt) AS day, SUM(total) AS total from `order` WHERE YEARWEEK(createdAt) = YEARWEEK(NOW()) GROUP BY DATE(createdAt)" : data === "weekly" ? "SELECT MAX(createdAt) AS month, SUM(total) AS total from `order` WHERE YEAR(createdAt) = YEAR(NOW()) GROUP BY MONTH(createdAt)" : "SELECT MAX(createdAt) AS month, SUM(total) AS total from `order` WHERE YEAR(createdAt) = YEAR(NOW()) GROUP BY MONTH(createdAt)", (err, result) => {
      if (!err) {
        resolve(result);
      } else {
        reject(new Error(`SQL: ${err.sqlMessage}`));
      }
    });
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJnZXREYXNoYm9hcmQiLCJkYXRhIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJxdWVyeSIsImVyciIsInJlc3VsdCIsIkVycm9yIiwic3FsTWVzc2FnZSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2R1bGVzL2Rhc2hib2FyZC9kYXNoYm9hcmRNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25uZWN0aW9uID0gcmVxdWlyZShcIi4uLy4uL2NvbmZpZy9teXNxbFwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldERhc2hib2FyZDogKGRhdGEpID0+XG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29ubmVjdGlvbi5xdWVyeShcbiAgICAgICAgZGF0YSA9PT0gXCJkYWlseVwiXG4gICAgICAgICAgPyBcIlNFTEVDVCBNQVgoY3JlYXRlZEF0KSBBUyBkYXksIFNVTSh0b3RhbCkgQVMgdG90YWwgZnJvbSBgb3JkZXJgIFdIRVJFIFlFQVJXRUVLKGNyZWF0ZWRBdCkgPSBZRUFSV0VFSyhOT1coKSkgR1JPVVAgQlkgREFURShjcmVhdGVkQXQpXCJcbiAgICAgICAgICA6IGRhdGEgPT09IFwid2Vla2x5XCJcbiAgICAgICAgICA/IFwiU0VMRUNUIE1BWChjcmVhdGVkQXQpIEFTIG1vbnRoLCBTVU0odG90YWwpIEFTIHRvdGFsIGZyb20gYG9yZGVyYCBXSEVSRSBZRUFSKGNyZWF0ZWRBdCkgPSBZRUFSKE5PVygpKSBHUk9VUCBCWSBNT05USChjcmVhdGVkQXQpXCJcbiAgICAgICAgICA6IFwiU0VMRUNUIE1BWChjcmVhdGVkQXQpIEFTIG1vbnRoLCBTVU0odG90YWwpIEFTIHRvdGFsIGZyb20gYG9yZGVyYCBXSEVSRSBZRUFSKGNyZWF0ZWRBdCkgPSBZRUFSKE5PVygpKSBHUk9VUCBCWSBNT05USChjcmVhdGVkQXQpXCIsXG4gICAgICAgIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFNRTDogJHtlcnIuc3FsTWVzc2FnZX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFaERDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZDLFlBQVksRUFBR0MsSUFBSSxJQUNqQixJQUFJQyxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7SUFDL0JSLFVBQVUsQ0FBQ1MsS0FBSyxDQUNkSixJQUFJLEtBQUssT0FBTyxHQUNaLHFJQUFxSSxHQUNySUEsSUFBSSxLQUFLLFFBQVEsR0FDakIsZ0lBQWdJLEdBQ2hJLGdJQUFnSSxFQUNwSSxDQUFDSyxHQUFHLEVBQUVDLE1BQU0sS0FBSztNQUNmLElBQUksQ0FBQ0QsR0FBRyxFQUFFO1FBQ1JILE9BQU8sQ0FBQ0ksTUFBTSxDQUFDO01BQ2pCLENBQUMsTUFBTTtRQUNMSCxNQUFNLENBQUMsSUFBSUksS0FBSyxDQUFFLFFBQU9GLEdBQUcsQ0FBQ0csVUFBVyxFQUFDLENBQUMsQ0FBQztNQUM3QztJQUNGLENBQ0YsQ0FBQztFQUNILENBQUM7QUFDTCxDQUFDIn0=