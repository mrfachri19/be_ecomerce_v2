const {
  v4: uuidv4
} = require("uuid");
const productModel = require("./productModel");
const helperWrapper = require("../../helpers/wrapper");
const deleteFile = require("../../helpers/deleteFile");
module.exports = {
  getAllProduct: async (req, res) => {
    try {
      let {
        category,
        search,
        sort,
        order,
        page,
        limit
      } = req.query;
      page = Number(page) || 1;
      limit = Number(limit) || 3;
      category = category || "";
      search = search || "";
      sort = sort || "name";
      order = order || "asc";
      let offset = page * limit - limit;
      const totalData = await productModel.getCountProduct(category, search);
      const totalPage = Math.ceil(totalData / limit);
      if (page > totalPage) {
        offset = 0;
        page = 1;
      }
      const pageInfo = {
        page,
        totalPage,
        limit,
        totalData
      };
      const result = await productModel.getAllProduct(category, search, sort, order, limit, offset);
      const newResult = result.map(item => {
        const data = {
          ...item,
          size: item.size.split(",")
        };
        return data;
      });
      if (newResult.length < 1) {
        return helperWrapper.response(res, 200, "Product not found", newResult, pageInfo);
      }
      return helperWrapper.response(res, 200, "Success get product data", newResult, pageInfo);
    } catch (error) {
      return helperWrapper.response(res, 400, `Bad request (${error.message})`, null);
    }
  },
  getProductById: async (req, res) => {
    try {
      const {
        id
      } = req.params;
      const result = await productModel.getProductById(id);
      if (result.length < 1) {
        return helperWrapper.response(res, 200, `Product by id ${id} not found !`, result);
      }
      return helperWrapper.response(res, 200, "Success get product by id", result);
    } catch (error) {
      return helperWrapper.response(res, 400, `Bad request (${error.message})`, null);
    }
  },
  postProduct: async (req, res) => {
    try {
      const {
        name,
        size,
        price,
        description,
        category
      } = req.body;
      const setData = {
        id: uuidv4(),
        name,
        image: req.file ? req.file.filename : null,
        size,
        price,
        description,
        category
      };
      if (name.length < 1 || size.length < 1 || price.length < 1 || description.length < 1 || category.length < 1) {
        return helperWrapper.response(res, 400, "All input must be filled", null);
      }
      const result = await productModel.postProduct(setData);
      return helperWrapper.response(res, 200, "Success post product", result);
    } catch (error) {
      return helperWrapper.response(res, 400, `Bad request (${error.message})`, null);
    }
  },
  updateProduct: async (req, res) => {
    try {
      const {
        id
      } = req.params;
      const checkId = await productModel.getProductById(id);
      if (checkId.length < 1) {
        return helperWrapper.response(res, 404, `Product by id ${id} not found !`, null);
      }
      const {
        name,
        size,
        price,
        description,
        category
      } = req.body;
      const setData = {
        name,
        image: req.file ? req.file.filename : null,
        size,
        price,
        description,
        category,
        updatedAt: new Date(Date.now())
      };
      Object.keys(setData).forEach(data => {
        if (!setData[data]) {
          delete setData[data];
        }
      });
      if (req.file && checkId[0].image) {
        deleteFile(`public/uploads/product/${checkId[0].image}`);
      }
      const result = await productModel.updateProduct(setData, id);
      return helperWrapper.response(res, 200, "Success update product data", result);
    } catch (error) {
      return helperWrapper.response(res, 400, `Bad request (${error.message})`, null);
    }
  },
  deleteProduct: async (req, res) => {
    try {
      const {
        id
      } = req.params;
      const checkId = await productModel.getProductById(id);
      if (checkId.length < 1) {
        return helperWrapper.response(res, 404, `Product by id ${id} not found !`, null);
      }
      if (checkId[0].image) {
        deleteFile(`public/uploads/product/${checkId[0].image}`);
        console.log("delete");
      }
      const result = await productModel.deleteProduct(id);
      return helperWrapper.response(res, 200, `Success delete product data by id ${id}`, result);
    } catch (error) {
      return helperWrapper.response(res, 400, `Bad request (${error.message})`, null);
    }
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsInJlcXVpcmUiLCJwcm9kdWN0TW9kZWwiLCJoZWxwZXJXcmFwcGVyIiwiZGVsZXRlRmlsZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJnZXRBbGxQcm9kdWN0IiwicmVxIiwicmVzIiwiY2F0ZWdvcnkiLCJzZWFyY2giLCJzb3J0Iiwib3JkZXIiLCJwYWdlIiwibGltaXQiLCJxdWVyeSIsIk51bWJlciIsIm9mZnNldCIsInRvdGFsRGF0YSIsImdldENvdW50UHJvZHVjdCIsInRvdGFsUGFnZSIsIk1hdGgiLCJjZWlsIiwicGFnZUluZm8iLCJyZXN1bHQiLCJuZXdSZXN1bHQiLCJtYXAiLCJpdGVtIiwiZGF0YSIsInNpemUiLCJzcGxpdCIsImxlbmd0aCIsInJlc3BvbnNlIiwiZXJyb3IiLCJtZXNzYWdlIiwiZ2V0UHJvZHVjdEJ5SWQiLCJpZCIsInBhcmFtcyIsInBvc3RQcm9kdWN0IiwibmFtZSIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJib2R5Iiwic2V0RGF0YSIsImltYWdlIiwiZmlsZSIsImZpbGVuYW1lIiwidXBkYXRlUHJvZHVjdCIsImNoZWNrSWQiLCJ1cGRhdGVkQXQiLCJEYXRlIiwibm93IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJkZWxldGVQcm9kdWN0IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2R1bGVzL3Byb2R1Y3QvcHJvZHVjdENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2NDogdXVpZHY0IH0gPSByZXF1aXJlKFwidXVpZFwiKTtcbmNvbnN0IHByb2R1Y3RNb2RlbCA9IHJlcXVpcmUoXCIuL3Byb2R1Y3RNb2RlbFwiKTtcbmNvbnN0IGhlbHBlcldyYXBwZXIgPSByZXF1aXJlKFwiLi4vLi4vaGVscGVycy93cmFwcGVyXCIpO1xuY29uc3QgZGVsZXRlRmlsZSA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL2RlbGV0ZUZpbGVcIik7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRBbGxQcm9kdWN0OiBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHsgY2F0ZWdvcnksIHNlYXJjaCwgc29ydCwgb3JkZXIsIHBhZ2UsIGxpbWl0IH0gPSByZXEucXVlcnk7XG4gICAgICBwYWdlID0gTnVtYmVyKHBhZ2UpIHx8IDE7XG4gICAgICBsaW1pdCA9IE51bWJlcihsaW1pdCkgfHwgMztcbiAgICAgIGNhdGVnb3J5ID0gY2F0ZWdvcnkgfHwgXCJcIjtcbiAgICAgIHNlYXJjaCA9IHNlYXJjaCB8fCBcIlwiO1xuICAgICAgc29ydCA9IHNvcnQgfHwgXCJuYW1lXCI7XG4gICAgICBvcmRlciA9IG9yZGVyIHx8IFwiYXNjXCI7XG4gICAgICBsZXQgb2Zmc2V0ID0gcGFnZSAqIGxpbWl0IC0gbGltaXQ7XG4gICAgICBjb25zdCB0b3RhbERhdGEgPSBhd2FpdCBwcm9kdWN0TW9kZWwuZ2V0Q291bnRQcm9kdWN0KGNhdGVnb3J5LCBzZWFyY2gpO1xuICAgICAgY29uc3QgdG90YWxQYWdlID0gTWF0aC5jZWlsKHRvdGFsRGF0YSAvIGxpbWl0KTtcbiAgICAgIGlmIChwYWdlID4gdG90YWxQYWdlKSB7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIHBhZ2UgPSAxO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFnZUluZm8gPSB7XG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHRvdGFsUGFnZSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHRvdGFsRGF0YSxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9kdWN0TW9kZWwuZ2V0QWxsUHJvZHVjdChcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgc29ydCxcbiAgICAgICAgb3JkZXIsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBvZmZzZXRcbiAgICAgICk7XG4gICAgICBjb25zdCBuZXdSZXN1bHQgPSByZXN1bHQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICBzaXplOiBpdGVtLnNpemUuc3BsaXQoXCIsXCIpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgIH0pO1xuICAgICAgaWYgKG5ld1Jlc3VsdC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICAgIHJlcyxcbiAgICAgICAgICAyMDAsXG4gICAgICAgICAgXCJQcm9kdWN0IG5vdCBmb3VuZFwiLFxuICAgICAgICAgIG5ld1Jlc3VsdCxcbiAgICAgICAgICBwYWdlSW5mb1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaGVscGVyV3JhcHBlci5yZXNwb25zZShcbiAgICAgICAgcmVzLFxuICAgICAgICAyMDAsXG4gICAgICAgIFwiU3VjY2VzcyBnZXQgcHJvZHVjdCBkYXRhXCIsXG4gICAgICAgIG5ld1Jlc3VsdCxcbiAgICAgICAgcGFnZUluZm9cbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICByZXMsXG4gICAgICAgIDQwMCxcbiAgICAgICAgYEJhZCByZXF1ZXN0ICgke2Vycm9yLm1lc3NhZ2V9KWAsXG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfVxuICB9LFxuICBnZXRQcm9kdWN0QnlJZDogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9kdWN0TW9kZWwuZ2V0UHJvZHVjdEJ5SWQoaWQpO1xuICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICAgIHJlcyxcbiAgICAgICAgICAyMDAsXG4gICAgICAgICAgYFByb2R1Y3QgYnkgaWQgJHtpZH0gbm90IGZvdW5kICFgLFxuICAgICAgICAgIHJlc3VsdFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gaGVscGVyV3JhcHBlci5yZXNwb25zZShcbiAgICAgICAgcmVzLFxuICAgICAgICAyMDAsXG4gICAgICAgIFwiU3VjY2VzcyBnZXQgcHJvZHVjdCBieSBpZFwiLFxuICAgICAgICByZXN1bHRcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICByZXMsXG4gICAgICAgIDQwMCxcbiAgICAgICAgYEJhZCByZXF1ZXN0ICgke2Vycm9yLm1lc3NhZ2V9KWAsXG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgfVxuICB9LFxuICBwb3N0UHJvZHVjdDogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgbmFtZSwgc2l6ZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSB9ID0gcmVxLmJvZHk7XG4gICAgICBjb25zdCBzZXREYXRhID0ge1xuICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGltYWdlOiByZXEuZmlsZSA/IHJlcS5maWxlLmZpbGVuYW1lIDogbnVsbCxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgcHJpY2UsXG4gICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICBjYXRlZ29yeSxcbiAgICAgIH07XG4gICAgICBpZiAoXG4gICAgICAgIG5hbWUubGVuZ3RoIDwgMSB8fFxuICAgICAgICBzaXplLmxlbmd0aCA8IDEgfHxcbiAgICAgICAgcHJpY2UubGVuZ3RoIDwgMSB8fFxuICAgICAgICBkZXNjcmlwdGlvbi5sZW5ndGggPCAxIHx8XG4gICAgICAgIGNhdGVnb3J5Lmxlbmd0aCA8IDFcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gaGVscGVyV3JhcHBlci5yZXNwb25zZShcbiAgICAgICAgICByZXMsXG4gICAgICAgICAgNDAwLFxuICAgICAgICAgIFwiQWxsIGlucHV0IG11c3QgYmUgZmlsbGVkXCIsXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvZHVjdE1vZGVsLnBvc3RQcm9kdWN0KHNldERhdGEpO1xuICAgICAgcmV0dXJuIGhlbHBlcldyYXBwZXIucmVzcG9uc2UocmVzLCAyMDAsIFwiU3VjY2VzcyBwb3N0IHByb2R1Y3RcIiwgcmVzdWx0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGhlbHBlcldyYXBwZXIucmVzcG9uc2UoXG4gICAgICAgIHJlcyxcbiAgICAgICAgNDAwLFxuICAgICAgICBgQmFkIHJlcXVlc3QgKCR7ZXJyb3IubWVzc2FnZX0pYCxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICB9XG4gIH0sXG4gIHVwZGF0ZVByb2R1Y3Q6IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgY2hlY2tJZCA9IGF3YWl0IHByb2R1Y3RNb2RlbC5nZXRQcm9kdWN0QnlJZChpZCk7XG4gICAgICBpZiAoY2hlY2tJZC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICAgIHJlcyxcbiAgICAgICAgICA0MDQsXG4gICAgICAgICAgYFByb2R1Y3QgYnkgaWQgJHtpZH0gbm90IGZvdW5kICFgLFxuICAgICAgICAgIG51bGxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgbmFtZSwgc2l6ZSwgcHJpY2UsIGRlc2NyaXB0aW9uLCBjYXRlZ29yeSB9ID0gcmVxLmJvZHk7XG4gICAgICBjb25zdCBzZXREYXRhID0ge1xuICAgICAgICBuYW1lLFxuICAgICAgICBpbWFnZTogcmVxLmZpbGUgPyByZXEuZmlsZS5maWxlbmFtZSA6IG51bGwsXG4gICAgICAgIHNpemUsXG4gICAgICAgIHByaWNlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSksXG4gICAgICB9O1xuICAgICAgT2JqZWN0LmtleXMoc2V0RGF0YSkuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoIXNldERhdGFbZGF0YV0pIHtcbiAgICAgICAgICBkZWxldGUgc2V0RGF0YVtkYXRhXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAocmVxLmZpbGUgJiYgY2hlY2tJZFswXS5pbWFnZSkge1xuICAgICAgICBkZWxldGVGaWxlKGBwdWJsaWMvdXBsb2Fkcy9wcm9kdWN0LyR7Y2hlY2tJZFswXS5pbWFnZX1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2R1Y3RNb2RlbC51cGRhdGVQcm9kdWN0KHNldERhdGEsIGlkKTtcbiAgICAgIHJldHVybiBoZWxwZXJXcmFwcGVyLnJlc3BvbnNlKFxuICAgICAgICByZXMsXG4gICAgICAgIDIwMCxcbiAgICAgICAgXCJTdWNjZXNzIHVwZGF0ZSBwcm9kdWN0IGRhdGFcIixcbiAgICAgICAgcmVzdWx0XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gaGVscGVyV3JhcHBlci5yZXNwb25zZShcbiAgICAgICAgcmVzLFxuICAgICAgICA0MDAsXG4gICAgICAgIGBCYWQgcmVxdWVzdCAoJHtlcnJvci5tZXNzYWdlfSlgLFxuICAgICAgICBudWxsXG4gICAgICApO1xuICAgIH1cbiAgfSxcbiAgZGVsZXRlUHJvZHVjdDogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjaGVja0lkID0gYXdhaXQgcHJvZHVjdE1vZGVsLmdldFByb2R1Y3RCeUlkKGlkKTtcbiAgICAgIGlmIChjaGVja0lkLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGhlbHBlcldyYXBwZXIucmVzcG9uc2UoXG4gICAgICAgICAgcmVzLFxuICAgICAgICAgIDQwNCxcbiAgICAgICAgICBgUHJvZHVjdCBieSBpZCAke2lkfSBub3QgZm91bmQgIWAsXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGNoZWNrSWRbMF0uaW1hZ2UpIHtcbiAgICAgICAgZGVsZXRlRmlsZShgcHVibGljL3VwbG9hZHMvcHJvZHVjdC8ke2NoZWNrSWRbMF0uaW1hZ2V9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRlXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvZHVjdE1vZGVsLmRlbGV0ZVByb2R1Y3QoaWQpO1xuICAgICAgcmV0dXJuIGhlbHBlcldyYXBwZXIucmVzcG9uc2UoXG4gICAgICAgIHJlcyxcbiAgICAgICAgMjAwLFxuICAgICAgICBgU3VjY2VzcyBkZWxldGUgcHJvZHVjdCBkYXRhIGJ5IGlkICR7aWR9YCxcbiAgICAgICAgcmVzdWx0XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gaGVscGVyV3JhcHBlci5yZXNwb25zZShcbiAgICAgICAgcmVzLFxuICAgICAgICA0MDAsXG4gICAgICAgIGBCYWQgcmVxdWVzdCAoJHtlcnJvci5tZXNzYWdlfSlgLFxuICAgICAgICBudWxsXG4gICAgICApO1xuICAgIH1cbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsRUFBRSxFQUFFQztBQUFPLENBQUMsR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUN0QyxNQUFNQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUM5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